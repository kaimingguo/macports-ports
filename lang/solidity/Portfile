# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0

PortGroup           github 1.0
PortGroup           cmake 1.1

github.setup        ethereum solidity 0.8.24 v
github.tarball_from releases
distname            ${github.project}_${github.version}

revision            0

name                solidity
categories          lang
license             GPL-3+

maintainers         {@kaimingguo kaiming.io:me} \
                    openmaintainer

description         Solidity, the Smart Contract Programming Language
long_description    Solidity is a statically typed, contract-oriented, \
                    high-level language for implementing smart contracts \
                    on the Ethereum platform.
homepage            https://soliditylang.org

checksums           rmd160  14a80ba6315744ec6892405a91b0ce22195cb78f \
                    sha256  def2ab7c877fcd16c81a166cdc5b99bfabcee7e8d505afcce816e9b1e451c61a \
                    size    3386993

depends_lib-append  port:boost

compiler.cxx_standard \
                    2017

configure.args      -DTESTS:BOOL=OFF \
                    -DBoost_USE_STATIC_LIBS:BOOL=OFF \
                    -DUSE_Z3:BOOL=OFF \
                    -DUSE_CVC4:BOOL=OFF

default_variants    +z3

variant z3 description {SMT Checker via Z3} {
    depends_lib-append \
        port:z3
    configure.args-append \
        -DSTRICT_Z3_VERSION:BOOL=OFF
    configure.args-replace \
        -DUSE_Z3:BOOL=OFF \
        -DUSE_Z3:BOOL=ON
}

variant cvc4 description {SMT Checker via CVC4} {
    depends_lib-append \
        port:cvc4
    configure.args-replace \
        -DUSE_CVC4:BOOL=OFF \
        -DUSE_CVC4:BOOL=ON
}
